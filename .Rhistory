coord_flip() +
facet_wrap(~item1,scales="free") +
theme(legend.position = "none") +
labs(title="Les tags les plus corrélés aux quatre genres d'animes classiques",
x=NULL, y=NULL)
# Corrélation des tags selon leur évolution pour les 4 genres classiques
mangas_corr %>%
filter(item1 %in% c("shounen","shoujo","seinen","josei")) %>%
group_by(item1) %>%
arrange(desc(correlation)) %>%
mutate(correlation = round(correlation,3),
item2 = str_wrap(item2,15)) %>%
top_n(10,correlation) %>%
ggplot(aes(tidytext::reorder_within(item2,correlation,item1),
correlation,fill=item1)) +
geom_col(alpha=0.4) +
geom_label(aes(label=correlation)) +
tidytext::scale_x_reordered()+
coord_flip() +
facet_wrap(~item1,scales="free") +
theme(legend.position = "none") +
labs(title="Les tags les plus corrélés aux quatre genres d'animes classiques",
x=NULL, y=NULL)
mangas_cooc %>%
filter(item1 %in% c("shounen","shoujo","seinen","josei")) %>%
group_by(item1) %>%
top_n(10,correlation) %>%
mutate(correlation = round(correlation,3),
item2 = str_wrap(item2,15)) %>%
ggplot(aes(tidytext::reorder_within(item2,correlation,item1),
correlation,
fill=item1)) +
geom_hline(yintercept = 0.25, color="red",
linetype="dashed") +
geom_col(color="black") +
coord_flip() +
tidytext::scale_x_reordered() +
facet_wrap(~item1, scales="free") +
theme(legend.position = "none") +
labs(title="Tags les plus corrélés aux quatre genres classiques",
subtitle="Basé sur la coocurence",
x=NULL, y=NULL,
caption="Compare le nombre de fois où les tags\napparaissent ensemble contre le nombre\nde fois où ils n'aparraissent pas ensemble")
mangas %>%
filter(!str_detect(tags,"content") &
studio %in% top_studio$studio) %>%
group_by(periode) %>%
count(studio) %>%
top_n(10,n) %>%
mutate(studio = str_wrap(studio,15)) %>%
ggplot(aes(tidytext::reorder_within(studio,n,periode),n,
fill=periode)) +
geom_col(color="black") +
coord_flip() +
tidytext::scale_x_reordered() +
facet_wrap(~periode,scales="free") +
theme(legend.position = "none") +
labs(title="Studios les plus productifs par période",
x=NULL, y=NULL)
# Corrélation des tags selon leur évolution pour les 4 genres classiques
mangas_corr %>%
filter(item1 %in% c("shounen","shoujo","seinen","josei")) %>%
group_by(item1) %>%
arrange(desc(correlation)) %>%
mutate(correlation = round(correlation,3),
item2 = str_wrap(item2,15)) %>%
top_n(10,correlation) %>%
ggplot(aes(tidytext::reorder_within(item2,correlation,item1),
correlation,fill=item1)) +
geom_col(alpha=0.4) +
geom_label(aes(label=correlation)) +
tidytext::scale_x_reordered()+
coord_flip() +
facet_wrap(~item1,scales="free") +
theme(legend.position = "none") +
labs(title="Les tags les plus corrélés aux quatre genres d'animes classiques",
x=NULL, y=NULL)
# Corrélation des tags selon leur évolution pour les 4 genres classiques
mangas_corr %>%
filter(item1 %in% c("shounen","shoujo","seinen","josei")) %>%
group_by(item1) %>%
arrange(desc(correlation)) %>%
mutate(correlation = round(correlation,3),
item2 = str_wrap(item2,15)) %>%
top_n(10,correlation) %>%
ggplot(aes(tidytext::reorder_within(item2,correlation,item1),
correlation,fill=item1)) +
geom_col(alpha=0.4) +
geom_label(aes(label=correlation)) +
tidytext::scale_x_reordered()+
coord_flip() +
facet_wrap(~item1,scales="free") +
theme(legend.position = "none") +
labs(title="Les tags les plus corrélés aux quatre genres d'animes classiques",
x=NULL, y=NULL)
```{r fig.height=8}
# Plus grands producteurs par période
mangas %>%
filter(!str_detect(tags,"content") &
studio %in% top_studio$studio) %>%
group_by(periode) %>%
count(studio) %>%
top_n(10,n) %>%
mutate(studio = str_wrap(studio,15)) %>%
ggplot(aes(tidytext::reorder_within(studio,n,periode),n,
fill=periode)) +
geom_col(color="black") +
coord_flip() +
tidytext::scale_x_reordered() +
facet_wrap(~periode,scales="free") +
theme(legend.position = "none") +
labs(title="Studios les plus productifs par période",
x=NULL, y=NULL)
# Plus grands producteurs par période
mangas %>%
filter(!str_detect(tags,"content") &
studio %in% top_studio$studio) %>%
group_by(periode) %>%
count(studio) %>%
top_n(10,n) %>%
mutate(studio = str_wrap(studio,15)) %>%
ggplot(aes(tidytext::reorder_within(studio,n,periode),n,
fill=periode)) +
geom_col(color="black") +
geom_label(aes(label=n)) +
coord_flip() +
tidytext::scale_x_reordered() +
facet_wrap(~periode,scales="free") +
theme(legend.position = "none") +
labs(title="Studios les plus productifs par période",
x=NULL, y=NULL)
ls(manga)
ls(mangas)
mangas %>%
filter(!str_detect(tags,"content")) %>%
ggplot(aes(popularite)) +
geom_density()
mangas %>%
filter(!str_detect(tags,"content")) %>%
ggplot(aes(log(popularite))) +
geom_density()
mangas %>%
filter(!str_detect(tags,"content"))
mangas %>%
filter(!str_detect(tags,"content") &
annee>2015)
mangas %>%
filter(!str_detect(tags,"content") &
annee>2015) %>%
distinct(form)
mangas %>%
filter(!str_detect(tags,"content") &
annee>2015) %>%
distinct(format)
mangas %>%
filter(!str_detect(tags,"content") &
annee>2015) %>%
group_by(annee) %>%
count(format)
mangas %>%
filter(!str_detect(tags,"content") &
annee>2015) %>%
group_by(annee) %>%
count(format)
mangas %>%
filter(!str_detect(tags,"content") &
annee>2015) %>%
group_by(annee) %>%
count(format) %>%
mutate(prop=n/sum(n))
mangas %>%
filter(!str_detect(tags,"content") &
annee>2015) %>%
group_by(annee) %>%
count(format) %>%
mutate(prop=n/sum(n)) %>%
ggplot(aes(annee,prop,fill=format)) +
geom_col()
mangas %>%
filter(!str_detect(tags,"content") &
annee>2015) %>%
group_by(annee) %>%
count(format) %>%
mutate(prop=n/sum(n)) %>%
ggplot(aes(annee,prop,fill=format)) +
geom_col() +
scale_x_continuous(breaks=2016:2023)
mangas %>%
filter(!str_detect(tags,"content") &
annee>2015 &
annee<2022) %>%
group_by(annee) %>%
count(format) %>%
mutate(prop=n/sum(n)) %>%
ggplot(aes(annee,prop,fill=format)) +
geom_col() +
scale_x_continuous(breaks=2016:2023)
mangas %>%
filter(!str_detect(tags,"content") &
annee>2015 &
annee<2022) %>%
group_by(annee) %>%
count(format) %>%
mutate(prop=n/sum(n)) %>%
ggplot(aes(annee,prop,fill=format)) +
geom_col() +
scale_x_continuous(breaks=2016:2023) +
scale_y_continuous(labels=scales::percent())
scale_y_continuous(labels=scales::percent
mangas %>%
mangas %>%
filter(!str_detect(tags,"content") &
annee>2015 &
annee<2022) %>%
group_by(annee) %>%
count(format) %>%
mutate(prop=n/sum(n)) %>%
ggplot(aes(annee,prop,fill=format)) +
geom_col() +
scale_x_continuous(breaks=2016:2023) +
scale_y_continuous(labels=scales::percent)
mangas %>%
filter(!str_detect(tags,"content") &
annee>2015 &
annee<2022) %>%
group_by(annee) %>%
mutate(format = case_when(
format %in% c("DVD Special","Other","Music Video","OVA") ~ "Other",
format %in% c("TV", "TV Special") ~ "TV"
format == "Web" ~ "Web"
mangas %>%
filter(!str_detect(tags,"content") &
annee>2015 &
annee<2022) %>%
group_by(annee) %>%
mutate(format = case_when(
format %in% c("DVD Special","Other","Music Video","OVA") ~ "Other",
format %in% c("TV", "TV Special") ~ "TV",
format == "Web" ~ "Web"
))
mangas %>%
filter(!str_detect(tags,"content") &
annee>2015 &
annee<2022) %>%
group_by(annee) %>%
distinct(format)
mangas %>%
filter(!str_detect(tags,"content") &
annee>2015 &
annee<2022) %>%
group_by(annee) %>%
ungroup() %>%
distinct(format)
mangas %>%
filter(!str_detect(tags,"content") &
annee>2015 &
annee<2022) %>%
group_by(annee) %>%
# ungroup() %>%
# distinct(format)
mutate(format = case_when(
format %in% c("DVD Special","Other","Music Video","OVA") ~ "Other",
format %in% c("TV", "TV Special") ~ "TV",
format == "Web" ~ "Web",
format == "Movie" ~ "Movie"
))
mangas %>%
filter(!str_detect(tags,"content") &
annee>2015 &
annee<2022) %>%
group_by(annee) %>%
# ungroup() %>%
# distinct(format)
mutate(format = case_when(
format %in% c("DVD Special","Other","Music Video","OVA") ~ "Other",
format %in% c("TV", "TV Special") ~ "TV",
format == "Web" ~ "Web",
format == "Movie" ~ "Movie"
)) %>%
ungroup() %>%
distinct()
mangas %>%
filter(!str_detect(tags,"content") &
annee>2015 &
annee<2022) %>%
group_by(annee) %>%
# ungroup() %>%
# distinct(format)
mutate(format = case_when(
format %in% c("DVD Special","Other","Music Video","OVA") ~ "Other",
format %in% c("TV", "TV Special") ~ "TV",
format == "Web" ~ "Web",
format == "Movie" ~ "Movie"
)) %>%
ungroup() %>%
distinct(format)
mangas %>%
filter(!str_detect(tags,"content") &
annee>2015 &
annee<2022) %>%
group_by(annee) %>%
# ungroup() %>%
# distinct(format)
mutate(format = case_when(
format %in% c("DVD Special","Other","Music Video","OVA") ~ "Other",
format %in% c("TV", "TV Special") ~ "TV",
format == "Web" ~ "Web",
format == "Movie" ~ "Movie"
)) %>%
count(format) %>%
mutate(prop=n/sum(n)) %>%
ggplot(aes(annee,prop,fill=format)) +
geom_col() +
scale_x_continuous(breaks=2016:2023) +
scale_y_continuous(labels=scales::percent)
mangas %>%
filter(!str_detect(tags,"content") &
annee>2015 &
annee<2022) %>%
group_by(annee) %>%
# ungroup() %>%
# distinct(format)
mutate(format = case_when(
format %in% c("DVD Special","Other","Music Video","OVA") ~ "Other",
format %in% c("TV", "TV Special") ~ "TV",
format == "Web" ~ "Web",
format == "Movie" ~ "Movie"
)) %>%
count(format) %>%
mutate(prop=n/sum(n)) %>%
ggplot(aes(annee,prop,fill=format)) +
geom_col() +
scale_x_continuous(breaks=2016:2023) +
scale_y_continuous(labels=scales::percent) %>%
theme(legend.position = "top")
mangas %>%
filter(!str_detect(tags,"content") &
annee>2015 &
annee<2022) %>%
group_by(annee) %>%
# ungroup() %>%
# distinct(format)
mutate(format = case_when(
format %in% c("DVD Special","Other","Music Video","OVA") ~ "Other",
format %in% c("TV", "TV Special") ~ "TV",
format == "Web" ~ "Web",
format == "Movie" ~ "Movie"
)) %>%
count(format) %>%
mutate(prop=n/sum(n)) %>%
ggplot(aes(annee,prop,fill=format)) +
geom_col() +
scale_x_continuous(breaks=2016:2023) +
scale_y_continuous(labels=scales::percent) +
theme(legend.position = "top")
mangas %>%
filter(!str_detect(tags,"content") &
annee>2015 &
annee<2022) %>%
group_by(annee) %>%
# ungroup() %>%
# distinct(format)
mutate(format = case_when(
format %in% c("DVD Special","Other","Music Video","OVA") ~ "Other",
format %in% c("TV", "TV Special") ~ "TV",
format == "Web" ~ "Web",
format == "Movie" ~ "Movie"
)) %>%
count(format) %>%
mutate(prop=n/sum(n)) %>%
ggplot(aes(annee,prop,fill=format)) +
geom_col() +
scale_x_continuous(breaks=2016:2023) +
scale_y_continuous(labels=scales::percent) +
geom_label(aes(label=prop)) +
theme(legend.position = "top") +
labs(title="Évolution de la part des formats",
subtitle="2016-2021")
mangas %>%
filter(!str_detect(tags,"content") &
annee>2015 &
annee<2022) %>%
group_by(annee) %>%
# ungroup() %>%
# distinct(format)
mutate(format = case_when(
format %in% c("DVD Special","Other","Music Video","OVA") ~ "Other",
format %in% c("TV", "TV Special") ~ "TV",
format == "Web" ~ "Web",
format == "Movie" ~ "Movie"
)) %>%
count(format) %>%
mutate(prop=n/sum(n)) %>%
ggplot(aes(annee,prop,fill=format)) +
geom_col() +
scale_x_continuous(breaks=2016:2023) +
scale_y_continuous(labels=scales::percent) +
geom_label(aes(label=prop), position="fille") +
theme(legend.position = "top") +
labs(title="Évolution de la part des formats",
subtitle="2016-2021")
mangas %>%
filter(!str_detect(tags,"content") &
annee>2015 &
annee<2022) %>%
group_by(annee) %>%
# ungroup() %>%
# distinct(format)
mutate(format = case_when(
format %in% c("DVD Special","Other","Music Video","OVA") ~ "Other",
format %in% c("TV", "TV Special") ~ "TV",
format == "Web" ~ "Web",
format == "Movie" ~ "Movie"
)) %>%
count(format) %>%
mutate(prop=n/sum(n)) %>%
ggplot(aes(annee,prop,fill=format)) +
geom_col() +
scale_x_continuous(breaks=2016:2023) +
scale_y_continuous(labels=scales::percent) +
geom_label(aes(label=prop), position="fill") +
theme(legend.position = "top") +
labs(title="Évolution de la part des formats",
subtitle="2016-2021")
mangas %>%
filter(!str_detect(tags,"content") &
annee>2015 &
annee<2022) %>%
group_by(annee) %>%
# ungroup() %>%
# distinct(format)
mutate(format = case_when(
format %in% c("DVD Special","Other","Music Video","OVA") ~ "Other",
format %in% c("TV", "TV Special") ~ "TV",
format == "Web" ~ "Web",
format == "Movie" ~ "Movie"
)) %>%
count(format) %>%
mutate(prop=n/sum(n)) %>%
ggplot(aes(annee,prop,fill=format)) +
geom_col() +
scale_x_continuous(breaks=2016:2023) +
scale_y_continuous(labels=scales::percent) +
geom_label(aes(label=scales::percent(prop,0.01)), position="fill") +
theme(legend.position = "top") +
labs(title="Évolution de la part des formats",
subtitle="2016-2021")
mangas %>%
filter(!str_detect(tags,"content") &
annee>2015 &
annee<2022) %>%
group_by(annee) %>%
# ungroup() %>%
# distinct(format)
mutate(format = case_when(
format %in% c("DVD Special","Other","Music Video","OVA") ~ "Other",
format %in% c("TV", "TV Special") ~ "TV",
format == "Web" ~ "Web",
format == "Movie" ~ "Movie"
)) %>%
count(format) %>%
mutate(prop=n/sum(n)) %>%
ggplot(aes(annee,prop,fill=format)) +
geom_col() +
scale_x_continuous(breaks=2016:2023) +
scale_y_continuous(labels=scales::percent) +
geom_label(aes(label=scales::percent(prop,0.01)), position="stack") +
theme(legend.position = "top") +
labs(title="Évolution de la part des formats",
subtitle="2016-2021")
library(readr)
ls()
mangas
dplyr::glimpse(mangas)
write_csv(mangas,file="mangas.csv")
getwd
getwd()
?write_csv
write_csv(mangas,file="mangas.csv",delim=";")
write_delim(mangas,file="mangas.csv",delim=";")
write_csv(mangas,file="mangas.csv")
mangas %>% filter(!str_detect(tags,"content"))
library(tidyverse)
mangas %>% filter(!str_detect(tags,"content"))
mangas %>% filter(!str_detect(tags,"content")) -> data
write_csv(data,file="mangas.csv")
library(tidyverse)
glimpse(alpha)
glimpse(data)
lisbrary(tidyverse)
library(tidyverse)
library(rvest)
url <- "https://www.markenregistrierung.ch/en/home/"
page <- read_html(url)
page %>%
html_node("table")
url <- "https://www.markenregistrierung.ch/en/trademarking-in-switzerland/"
page <- read_html(url)
page %>%
html_node("table")
page %>%
html_node("table") %>%
html_table()
page %>%
html_node("table") %>%
html_table()
library(tidyverse)
page %>%
html_node("table") %>%
html_table() %>%
slice(-1)
rm(page,url)
